<!--/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  ~ This version has no margin, used when embedded in other components
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/-->
<sly data-sly-use.image="org.chi.aem.common.components.model.Image"
     data-sly-use.template="chinational/components/commons/templates.html"></sly>

<a data-sly-unwrap="${!image.linkURL}" href="${image.linkURL}" target="${image.targetBlank==true ?'_blank':'_self'}">
    <picture data-sly-test="${((image.imgTabSrc == image.fileReference) && (image.imgMobSrc == image.fileReference))}">
        <source srcset="${image.fileReference}" sizes="100vw" />
        <img src="${image.fileReference}"
             class="${properties.useOriginalSize?'image-max-width-responsive':'image-responsive'}"
             alt="${image.alt || 'Image Component'}"/>
    </picture>
    <picture data-sly-test="${(image.imgTabSrc == image.fileReference) && (image.imgMobSrc != image.fileReference)}">
        <source media="(min-width: 768px)" srcset="${image.fileReference}" sizes="100vw" />
        <source media="(min-width: 10px)" srcset="${image.imgMobSrc}" sizes="100vw" />
        <img src="${image.fileReference}"
             class="${properties.useOriginalSize?'image-max-width-responsive':'image-responsive'}" alt="${image.alt || 'Image Component'}"/>
    </picture>
    <picture data-sly-test="${(image.imgMobSrc == image.fileReference) && (image.imgTabSrc != image.fileReference)}">
        <source media="(min-width: 992px)" srcset="${image.fileReference}" sizes="100vw" />
        <source media="(min-width: 768px)" srcset="${image.imgTabSrc}" sizes="100vw" />
        <img src="${image.fileReference}"
             class="${properties.useOriginalSize?'image-max-width-responsive':'image-responsive'}" alt="${image.alt || 'Image Component'}"/>
    </picture>
    <picture data-sly-test="${(image.imgTabSrc != image.fileReference) && (image.imgMobSrc != image.fileReference)}">
        <source media="(min-width: 992px)" srcset="${image.fileReference}" sizes="100vw" />
        <source media="(min-width: 768px)" srcset="${image.imgTabSrc}" sizes="100vw" />
        <source media="(min-width: 10px)" srcset="${image.imgMobSrc}" sizes="100vw" />
        <img src="${image.fileReference}"
             class="${properties.useOriginalSize?'image-max-width-responsive':'image-responsive'}" alt="${image.alt || 'Image Component'}"/>
    </picture>
</a>
<p class="light-txt" data-sly-test="${properties.imageCaption}">${properties.imageCaption}</p>
<sly data-sly-call="${template.placeholder @ isEmpty=!image.fileReference}"></sly>

<!--  Added for Image Enhancement -->
<div data-sly-test="${(wcmmode.edit || wcmmode.design) && image.fileReference}">
  <div id="desktop">
    <sly data-sly-test="${image.fileReference}">
        <h4>Edit Image for Desktop (displayed during edit mode only)</h4>
        <div data-sly-resource="${ @path='desktop', resourceType='chinational/components/content/imageDesktop'}"></div>
    </sly>
  </div>
  <div id="ipad" >
    <sly data-sly-test="${image.fileReference}">
        <h4>Edit Image for iPad (displayed during edit mode only)</h4>
        <div data-sly-resource="${ @path='ipad', resourceType='chinational/components/content/imageIpad'}"></div>
    </sly>
  </div>
  <div id="mobile" >
    <sly data-sly-test="${image.fileReference}">
        <h4>Edit Image for Mobile (displayed during edit mode only)</h4>
        <div data-sly-resource="${ @path='mobile', resourceType='chinational/components/content/imageMobile'}"></div>
    </sly>
  </div>
</div>

<!-- Copied Code -->
<sly data-sly-use.imageInfo="org.chi.aem.common.components.model.ImageEnhancementModel"/>

<div class="row"  data-sly-test="${imageInfo.imagePath}">
    <div class="col-sm-12">
        <div class="full-image">
            <div>
                <picture class="image-max-width-responsive">
                    <img src="${imageInfo.imagePath}">
                </picture>
            </div>
        </div>
    </div>
</div>
<div class="row" style="border: 1px solid black;"
     data-sly-test="${(wcmmode.edit || wcmmode.design) && pageProperties.imageSrc}">
    <h3>Edit Header image, if required (this is displayed during edit mode only)</h3>
    <div data-sly-test="${pageProperties.imageSrc}"
         data-sly-resource="${ @path='desktop', resourceType='chinational/components/content/imageDesktop'}"></div>
    
    <sly data-sly-test="${pageProperties.ipadImageSrc}">
        <h4>Edit Header Image to create tile image (displayed during edit mode only)</h4>
        <div
                data-sly-resource="${ @path='ipad', resourceType='chinational/components/content/imageIpad'}"></div>
    </sly>
    <sly data-sly-test="${pageProperties.mobileImageSrc}">
        <h4>Edit Tile Image (displayed during edit mode only)</h4>
        <div
                data-sly-resource="${ @path='mobile', resourceType='chinational/components/content/imageMobile'}"></div>
    </sly>
</div>